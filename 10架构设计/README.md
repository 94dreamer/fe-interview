# 架构设计

## 一、谈谈你对重构的理解?

### What

需求是抽象，代码是实例。
重构就是按照对需求的抽象理解，把代码重新组织成抽象的实体。

### Why

- 代码的组织方式不符合实际需求，不利于理解和维护
- 代码的抽象限制了拓展，需要重新实现来延长软件生命

### How

- 梳理需求，设计建模
- 按照结构来产出代码
- 运用设计原则和模式来提高可拓展性

## 二、前后端分离的理解

1. 前后端分离可能有一些前后端人员的冲突，但是基本上是围绕项目的稳定性和工作量。
2. 对于前后端分离的场景来说，后台应用系统更适合一些，前端后分离的优势在用户操作视图频繁的 Web 应用上能显露无疑。在前台的展示类网站，前后端分离的价值就不是那么大。
3. 通过职位划分 提高了业务分工的专精度，从此后端人员只需关心数据和脚本的正确性，提供 RESTful API，前端人员专供数据在客户端显示和操作交互，各司其职。
4. 前后端分离通过 AJAX 的 JSON 通信，提高了用户调取服务器数据的操作流畅度，用客户端来分担了服务器的计算压力和带宽流量负担。
5. 对于多入口的产品，前后端分离让接口提供人员的工作更专一,稍加修改就可以给多种前端提供接口。
6. 前后端分离，让前后端各自的改造和重构优化可以互不影响。

## 三、微前端架构是怎么做的？

[美业微前端的落地](https://github.com/94dreamer/Note/tree/master/A2021/美业微前端的落地)

1. 背景
2. 技术结构
   1. 原项目 node 转发
   2. 基座 Node 提供模板渲染和服务发现
   3. Apollo 注册中心提供服务注册、工程化串联
   4. 基座前端提供容器渲染、路由劫持、页面加载、沙箱机制
   5. 子应用的定位是构建生产的 cdn 产出能够在容器内渲染页面
   6. Shared 提供子应用代码逻辑复用
3. 工程结构
   1. 脚手架提供可复用的构建方案
   2. Nignx+ZanProxy 提供多环境调试能力
4. 难点在贴合业务的整体解决方案
   1. 渐进式迁移、保障可用性和并发
   2. 独立开发和部署
   3. 适配多环境

## 四、怎么搭建 SSR 架构，需要注意什么？有什么优势？为什么比 CSR 首屏快？

## Vue SSR 重构

1. 背景、偶发 404
2. v8-profile 内存快照
3. 本地 ab 压测
4. 对比更新 SSR 模式
5. 重构
6. 难点在于
   1. 找到问题
   2. 重构成本
   3. 可用性保障：灰度+日志监控

## 秒杀场景 Node 性能优化

- 秒杀
- 限流
- 压测
- 缓存

## 一个秒杀活动前后端需要怎么准备

## 从零到一搭建一个项目

## 如何保证服务器高可用
